import math
import streamlit as st
import matplotlib.pyplot as plt

# Ø¹Ù†ÙˆØ§Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡
st.title("ğŸŒ€ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ø§ÙˆÛŒÙ‡ Ù…Ø®Ø±ÙˆØ· ØªØ±Ø§Ø´ÛŒ")

# ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø§Ø² Ú©Ø§Ø±Ø¨Ø±
D = st.number_input("Ù‚Ø·Ø± Ø¨Ø²Ø±Ú¯â€ŒØªØ± D (Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±)", min_value=0.0, value=50.0)
d = st.number_input("Ù‚Ø·Ø± Ú©ÙˆÚ†Ú©â€ŒØªØ± d (Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±)", min_value=0.0, value=30.0)
l = st.number_input("Ø·ÙˆÙ„ Ù…Ø®Ø±ÙˆØ· l (Ù…ÛŒÙ„ÛŒâ€ŒÙ…ØªØ±)", min_value=0.1, value=100.0)

if D > d:
    delta_d = D - d
    tan_alpha_2 = delta_d / (2 * l)
    alpha_rad = math.atan(tan_alpha_2) * 2
    alpha_deg = math.degrees(alpha_rad)
    k = 1 / (2 * tan_alpha_2)

    st.success(f"ğŸ”¸ Ø²Ø§ÙˆÛŒÙ‡ Ù…Ø®Ø±ÙˆØ· (Î±): {alpha_deg:.2f} Ø¯Ø±Ø¬Ù‡")
    st.info(f"ğŸ”¸ Ø¶Ø±ÛŒØ¨ Ù…Ø®Ø±ÙˆØ·ÛŒ Ø¨ÙˆØ¯Ù† (k): {k:.3f}")

    # Ø±Ø³Ù… Ú¯Ø±Ø§Ù
    fig, ax = plt.subplots()
    X = [0, l, 0]
    Y_top = [D/2, 0, d/2]
    Y_bottom = [-y for y in Y_top]

    ax.plot(X, Y_top, 'r', linewidth=2)
    ax.plot(X, Y_bottom, 'r', linewidth=2)
    ax.fill_between(X, Y_top, Y_bottom, color='orange', alpha=0.3)
    ax.set_title("Ø´Ù…Ø§ÛŒ Ù…Ø®Ø±ÙˆØ· ØªØ±Ø§Ø´ÛŒ")
    ax.set_xlabel("Ø·ÙˆÙ„ (l)")
    ax.set_ylabel("Ù‚Ø·Ø±")
    ax.axis('equal')
    ax.grid(True)

    st.pyplot(fig)
else:
    st.warning("âš ï¸ Ù‚Ø·Ø± Ø¨Ø²Ø±Ú¯â€ŒØªØ± Ø¨Ø§ÛŒØ¯ Ø§Ø² Ù‚Ø·Ø± Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø¨ÛŒØ´ØªØ± Ø¨Ø§Ø´Ø¯.")
